# FourierPicture

落書きをフーリエ変換で抽象化するWebアプリ

👉 **[デモを試す](https://milky1210.github.io/FourierPicture/)**

![スクリーンショット](image/README/1764253760039.png)

## 特徴

| 機能 | 説明 |
|------|------|
| 🎨 複数ストローク | 複数の線を描いて一つの絵に |
| 🔄 フーリエ変換 | 指定した項数(K)で再構成 |
| 🎬 アニメーション | K=2から徐々に項数を増やして再構成過程を可視化 |
| 📹 動画出力 | WebM形式で保存可能 |
| 📱 モバイル対応 | タッチ操作に対応 |
| 🔗 QR共有 | 復号方法が埋め込まれたQRカードを生成 |

## 使い方

1. 左のキャンバスに絵を描く
2. フーリエ項数(K)を設定
3. 「フーリエ変換」または「アニメーション生成」をクリック
4. 右のキャンバスに再構成された絵が表示される
5. 「QRカード作成」をクリックして共有可能なアーティファクトカードを生成

## 仕組み

描いた点列を複素数 $z = x + iy$ として離散フーリエ変換(DFT)し、振幅の大きい上位K個の周波数成分のみで再構成します。Kが小さいほど抽象的な形になり、大きくすると元の絵に近づきます。

詳しい数学的背景は [技術資料 (TECHNICAL.ja.md)](TECHNICAL.ja.md) を参照してください。

### QRコード形式

生成されるQRコードには復元方法と係数データが両方埋め込まれており、完全に独立したドキュメントになっています：

**QRコードのデータ構造：**
```
[ASCII復号器ヘッダー] + [バイナリ係数データ]
```

**埋め込まれた復号手順：**
```
[UNIVERSAL DECODER: FOURIER STROKE]
Formula: v(t)=Sum(Re(F[k]*exp(i*2*pi*k*t)))
Range: t=0.0...1.0
Target: X,Y,Pen axes independently
Draw: Plot(x(t),y(t)) where pen(t)>0.5
Data: [バイナリ係数]
```

つまり：
- QRコードは**完全に自己完結している** – 外部のドキュメントがなくても復号可能
- このリポジトリがなくなっても、QRコード自体に復元方法が含まれている
- 任意の言語の実装（Python、JavaScript等）で復号可能
- 将来フォーマットが変わった場合でも「この手順に従え」という指示が残る

**データエンコード：**
- 係数に対するコンパクトバイナリ形式（JSON比で60%サイズ削減）
- ユニバーサル対応のASCIIメタデータ（約180バイト）
- 3D複数ストロークモードと2D単一ストロークモードをサポート
- 古いURLフォーマットとの後方互換性あり

## ローカルで実行

```
git clone https://github.com/milky1210/FourierPicture.git
```

`docs/index.html` をブラウザで開くだけで動作します。

## ライセンス

MIT License

---

[English README](README.md)